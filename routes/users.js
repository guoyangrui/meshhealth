var express = require('express');var router = express.Router();var tx = require('../tx');var bitcoin = require('bitcoinjs-lib');//var network = bitcoin.networks.testnet/* GET users listing. */router.get('/', function(req, res, next) {  res.send('respond with a resource');});/* Authenticate doctor to access user info */router.get('/auth/:user', function(req, res, next) {    var user = req.params.user;    var txid = "";    tx(function(data, result) {            txid = result[0];            console.log(txid);            res.render('diagnosis',  {title: "Mesh Health", user: user, txid: txid});        });});/* This should be used for real data */router.post('/auth', function(req, res, next) {    var user = req.body.user;    var txid = "";    var data = new Buffer('bitcoinjs-lib');    tx(data, function(err, result) {            txid = result[0];            console.log(txid);        });    res.render('diagnosis',  {title: "Mesh Health", user: user, txid: txid});});module.exports = router;